"use strict";(self.webpackChunkhpcdocs=self.webpackChunkhpcdocs||[]).push([[6989],{3905:(t,e,r)=>{r.d(e,{Zo:()=>p,kt:()=>h});var n=r(7294);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}var u=n.createContext({}),c=function(t){var e=n.useContext(u),r=e;return t&&(r="function"==typeof t?t(e):o(o({},e),t)),r},p=function(t){var e=c(t.components);return n.createElement(u.Provider,{value:e},t.children)},l="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var r=t.components,a=t.mdxType,i=t.originalType,u=t.parentName,p=s(t,["components","mdxType","originalType","parentName"]),l=c(r),d=a,h=l["".concat(u,".").concat(d)]||l[d]||m[d]||i;return r?n.createElement(h,o(o({ref:e},p),{},{components:r})):n.createElement(h,o({ref:e},p))}));function h(t,e){var r=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var u in e)hasOwnProperty.call(e,u)&&(s[u]=e[u]);s.originalType=t,s[l]="string"==typeof t?t:a,o[1]=s;for(var c=2;c<i;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3947:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const i={slug:"scratch_disk"},o="Skrapdiskar",s={unversionedId:"elja/scratch",id:"elja/scratch",title:"Skrapdiskar",description:"Hratt I/O (inntak/\xfattak) er au\xf0velda\xf0 me\xf0 notkun sta\xf0bundinna skrapdiska sem til eru \xe1 t\xf6lvuhn\xfatunum",source:"@site/i18n/is/docusaurus-plugin-content-docs/current/elja/03_scratch.md",sourceDirName:"elja",slug:"/elja/scratch_disk",permalink:"/is/docs/elja/scratch_disk",draft:!1,editUrl:"https://github.com/irhpc/irhpc.github.io/edit/main/docs/elja/03_scratch.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"scratch_disk"},sidebar:"tutorialSidebar",previous:{title:"Senda inn lotuverkefni",permalink:"/is/docs/elja/submit_jobs"},next:{title:"Gagnvirkar lotur",permalink:"/is/docs/elja/interactive_session"}},u={},c=[{value:"Notkun /scratch/users/ me\xf0 SBATCH",id:"notkun-scratchusers-me\xf0-sbatch",level:2},{value:"Notkun /scratch/users/ \xe1 gagnvirkri lotu",id:"notkun-scratchusers-\xe1-gagnvirkri-lotu",level:2}],p={toc:c},l="wrapper";function m(t){let{components:e,...i}=t;return(0,a.kt)(l,(0,n.Z)({},p,i,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"skrapdiskar"},"Skrapdiskar"),(0,a.kt)("p",null,"Hratt ",(0,a.kt)("strong",{parentName:"p"},"I/O")," (inntak/\xfattak) er au\xf0velda\xf0 me\xf0 notkun sta\xf0bundinna skrapdiska sem til eru \xe1 t\xf6lvuhn\xfatunum"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"MIKILV\xc6GT:")," Mikilv\xe6gt er a\xf0 n\xfdta ",(0,a.kt)("strong",{parentName:"p"},"Elju")," \xe1 skilvirkan h\xe1tt og h\xe6gja eki \xe1 netumfer\xf0 um \xfeyrpinguna. \xdeess vegna er r\xe1\xf0lagt a\xf0 afrita g\xf6gnin og inntaki\xf0 fyrir starfi\xf0 \xfeitt yfir \xe1 sta\xf0bundinn skrapdisk \xe1 reiknihn\xfatunum (",(0,a.kt)("strong",{parentName:"p"},"/scratch/users"),") og r\xe6sa forriti\xf0 \xfea\xf0\xe1n. Ef \xfeessu skrefi er sleppt mun forriti\xf0\nkeyra fjarst\xfdrti \xe1 reiknihn\xfatunum en mun st\xf6\xf0ugt lesa/skrifa fr\xe1/\xed heima skr\xe1na \xe1 ",(0,a.kt)("strong",{parentName:"p"},"NFS")," \xfej\xf3ninum. \xdeetta skapar mikla netumfer\xf0 og h\xe6gir \xe1 notkun ",(0,a.kt)("strong",{parentName:"p"},"Elju")," fyrir alla. \xdea\xf0 mun einnig h\xe6gja \xe1 verkinu sj\xe1lfu.")),(0,a.kt)("h2",{id:"notkun-scratchusers-me\xf0-sbatch"},"Notkun /scratch/users/ me\xf0 SBATCH"),(0,a.kt)("p",null,"D\xe6mi\xf0 h\xe9r gerir r\xe1\xf0 fyrir a\xf0 notandinn s\xe9 a\xf0 vinna me\xf0 ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," lotu skriftu og \xed einhverri vinnuskr\xe1 \xed heimam\xf6ppu notenda. Til d\xe6mis:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ pwd\n[..]$ /users/home/<uname>/myjob\n")),(0,a.kt)("p",null,"og ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," sendingar skriftan er \xed s\xf6mu m\xf6ppu"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ /users/home/<uname>/myjob/submit.sh\n")),(0,a.kt)("p",null,"D\xe6mi um bash l\xednur fyrir ",(0,a.kt)("strong",{parentName:"p"},"/scratch/users/")," eru a\xf0 ne\xf0\xe1n.\nEftirfarandi l\xednum \xe6tti a\xf0 b\xe6ta vi\xf0 ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," skriftuna \xfe\xedna.\nD\xe6mi um ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," skriftu er veitt \xed lokin."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'[..]$ cat submit.sh\n..\n# Location of scratch directory on the compute nodes\nscratchlocation=/scratch/users\n\n# Create a user directory if it does not exist\nif [ ! -d $scratchlocation/$USER ]; then\n    mkdir -p $scratchlocation/$USER\nfi\n\n# Create a temporary directory with a unique identifier associated with your jobid\ntdir=$(mktemp -d $scratchlocation/$USER/$SLURM_JOB_ID-XXXX)\n\n# Go to the temporary directory\ncd $tdir\n\n# Exit if tdir does not exist\nif [ ! -d $tdir ]; then\n    echo "Temporary scratch directory does not exist ..."\n    echo "Something is wrong, contact support."\n    exit\nfi\n\n# Copy the necessary input files to run your job\nscp -l 40000 $SLURM_SUBMIT_DIR/myinput $tdir/\n\n# If the program needs many input files you can add a separate line for each file.\n\n# If your job requires a directory of input files\n# cp -r $SLURM_SUBMIT_DIR/myinputdir $tdir/\n\n# Now the run the job from the temporary directory e.g.\nmyprogram myinput\n\n# After the job is completed make sure to copy the output to your submit directory.\nscp -l 40000 $tdir/myoutputfiles $SLURM_SUBMIT_DIR/\n\n# If the program produces many output files you can add a separate line for each file.\n# Please try to only copy the files that you need.\n\n# IMPORTANT. Delete the temporary directory and all of its content\nrm -rf $tdir\n\n')),(0,a.kt)("p",null,"An example ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," script for a typical Python job is provided ",(0,a.kt)("a",{target:"_blank",href:r(6854).Z},"here"),". Similar commands can be used when the user is in an ",(0,a.kt)("a",{parentName:"p",href:"/is/docs/elja/interactive_session"},"interactive session"),"."),(0,a.kt)("h2",{id:"notkun-scratchusers-\xe1-gagnvirkri-lotu"},"Notkun /scratch/users/ \xe1 gagnvirkri lotu"),(0,a.kt)("p",null,"D\xe6mi\xf0 h\xe9r gerir r\xe1\xf0 fyrir a\xf0 notandinn s\xe9 a\xf0 vinna \xed ",(0,a.kt)("strong",{parentName:"p"},"gagnvirkri lotu")," og \xed einhverri vinnuskr\xe1 \xed heimam\xf6ppu notenda. Til d\xe6mis"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ pwd\n[..]$ /users/home/<uname>/myjob\n")),(0,a.kt)("p",null,"D\xe6mi um bash l\xednur fyrir ",(0,a.kt)("strong",{parentName:"p"},"/scratch/users/")," er a\xf0 finna h\xe9r a\xf0 ne\xf0an \xe1 me\xf0an ",(0,a.kt)("strong",{parentName:"p"},"gagnvirkr lotu")," stendur. D\xe6mu um hvernig \xe1 a\xf0 tengjast gagnvirkr lotu er a\xf0 finna ",(0,a.kt)("a",{parentName:"p",href:"/is/docs/elja/interactive_session"},"h\xe9r"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'$ export scratchlocation=/scratch/users \n\n# Create a user directory if it does not exist\n$ [ ! -d "$scratchlocation/$USER" ] && mkdir "$scratchlocation/$USER"\n\n\n# Create a temporary directory with a unique identifier associated with your jobid\n$ tdir=$(mktemp -d "$scratchlocation/$USER/temp_dir.XXXXXX")\n\n\n# Go to the temporary directory\n$ cd $tdir\n\n# Copy the necessary input files to run your job\n$ cp submit_to_scratch_dir $tdir/\n\n# Run the program from your temporary directory\nmyprogram myinput\n\n# After the job is completed make sure to copy the output to your submit directory.\n$ cp $tdir/myoutputfiles submit_to_scratch_dir/\n\n# If the program produces many output files you can add a separate line for each file.\n# Please try to only copy the files that you need.\n\n\n# IMPORTANT. Delete the temporary directory and all of its content\n$ rm -rf $tdir\n')),(0,a.kt)("p",null,"D\xe6mi um ",(0,a.kt)("strong",{parentName:"p"},"SBATCH")," skriftu fyrir t\xfdp\xedskt Python verkefni er a\xf0 finna ",(0,a.kt)("a",{target:"_blank",href:r(4235).Z},"h\xe9r"),". Samskonar skipanir er h\xe6gt a\xf0 nota \xed ",(0,a.kt)("a",{parentName:"p",href:"/is/docs/elja/interactive_session"},"gagnvirkri lotu"),"."))}m.isMDXComponent=!0},4235:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"assets/files/py_submit-174aa2794e34ada476072a981dbb8c43.txt"},6854:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"assets/files/py_submit-174aa2794e34ada476072a981dbb8c43.txt"}}]);