"use strict";(self.webpackChunkhpcdocs=self.webpackChunkhpcdocs||[]).push([[8544],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),o=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=o(e.components);return r.createElement(u.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=o(n),d=a,k=m["".concat(u,".").concat(d)]||m[d]||c[d]||i;return n?r.createElement(k,l(l({ref:t},p),{},{components:n})):r.createElement(k,l({ref:t},p))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[m]="string"==typeof e?e:a,l[1]=s;for(var o=2;o<i;o++)l[o]=n[o];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4655:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var r=n(7462),a=(n(7294),n(3905));const i={slug:"submit_jobs"},l="Senda inn lotuverkefni",s={unversionedId:"elja/submit",id:"elja/submit",title:"Senda inn lotuverkefni",description:"SLURM",source:"@site/i18n/is/docusaurus-plugin-content-docs/current/elja/02_submit.md",sourceDirName:"elja",slug:"/elja/submit_jobs",permalink:"/is/docs/elja/submit_jobs",draft:!1,editUrl:"https://github.com/irhpc/irhpc.github.io/edit/main/docs/elja/02_submit.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{slug:"submit_jobs"},sidebar:"tutorialSidebar",previous:{title:"Bash",permalink:"/is/docs/elja/bash"},next:{title:"Skrapdiskar",permalink:"/is/docs/elja/scratch_disk"}},u={},o=[{value:"SLURM",id:"slurm",level:2},{value:"Fairshare",id:"fairshare",level:2},{value:"Lotust\xf6rf",id:"lotust\xf6rf",level:2}],p={toc:o},m="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"senda-inn-lotuverkefni"},"Senda inn lotuverkefni"),(0,a.kt)("h2",{id:"slurm"},"SLURM"),(0,a.kt)("p",null,"Elja notar ",(0,a.kt)("inlineCode",{parentName:"p"},"SLURM")," sem lotu\xe1\xe6tlun og tilfangastj\xf3ra.\nAlgengar grunnskipanir eru teknar saman h\xe9r a\xf0 ne\xf0an."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Skipun"),(0,a.kt)("th",{parentName:"tr",align:null},"L\xfdsing"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"sbatch")),(0,a.kt)("td",{parentName:"tr",align:null},"Senda inn lotuskriftu")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"srun")),(0,a.kt)("td",{parentName:"tr",align:null},"Keyrir samhli\xf0a lotu")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"squeue")," (-a, -u $USER)"),(0,a.kt)("td",{parentName:"tr",align:null},"s\xfdnur st\xf6\xf0u SLURM bi\xf0ra\xf0rinnar")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"sinfo")),(0,a.kt)("td",{parentName:"tr",align:null},"S\xfdnir uppl\xfdsingar um hn\xfata og snei\xf0ar")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"scancel")," ",(0,a.kt)("strong",{parentName:"td"},"JOBID")),(0,a.kt)("td",{parentName:"tr",align:null},"H\xe6tta vi\xf0 keyrslu")))),(0,a.kt)("h2",{id:"fairshare"},"Fairshare"),(0,a.kt)("p",null,"T\xf6lvuKlasinn veitir Slurm Fairshare Algr\xedm. Hann skipuleggur hva\xf0a vinnslur \xed slurm bi\xf0r\xf6\xf0inni \xe6tti a\xf0 keyrast \xe1 undan og metur \xfea\xf0 \xfatfr\xe1 sanngj\xf6rnum hlutdeildarstu\xf0li milli vinnsla sem er reikna\xf0 \xfat me\xf0 \xe1kv\xf0enari j\xf6fnu."),(0,a.kt)("p",null,"\xdeessi jafna tekur tillit til margra \xfe\xe1tta eins og fj\xf6lda hn\xfata sem notandi \xf3skar er eftir. N\xe1nari uppl\xfdsingar um \xfeessa j\xf6fnu er a\xf0 h\xe6gt a\xf0 finna ",(0,a.kt)("a",{parentName:"p",href:"https://slurm.schedmd.com/fair_tree.html#fairshare"},"h\xe9r")," og ","[h\xe9r]","(https:/ /slurm.schedmd.com/SLUG19/Priority_and_Fair_Trees.pdf)."),(0,a.kt)("h2",{id:"lotust\xf6rf"},"Lotust\xf6rf"),(0,a.kt)("p",null,"Skipunin ",(0,a.kt)("inlineCode",{parentName:"p"},"sbatch")," er notu\xf0 til \xe1\xf0 senda verk \xed ",(0,a.kt)("inlineCode",{parentName:"p"},"SLURM")," bi\xf0r\xf6\xf0ina"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ sbatch submit_script\n")),(0,a.kt)("p",null,"Lotu skrifta byrjar vanalega svona"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/bash\n#SBATCH --mail-type=ALL\n#SBATCH --mail-user=<Your E-mail> # for example uname@hi.is\n#SBATCH --partition=48cpu_192mem  # request node from a specific partition\n#SBATCH --nodes=2                 # number of nodes\n#SBATCH --ntasks-per-node=48      # 48 cores per node (96 in total)\n#SBATCH --mem-per-cpu=3900        # MB RAM per cpu core\n#SBATCH --time=0-04:00:00         # run for 4 hours maximum (DD-HH:MM:SS)\n#SBATCH --hint=nomultithread      # Suppress multithread\n#SBATCH --output=slurm_job_output.log   \n#SBATCH --error=slurm_job_errors.log   # Logs if job crashes\n\n. ~/.program_env_bash\n\nmpirun python job.py\n")),(0,a.kt)("p",null,"H\xe9r er be\xf0i\xf0 um tvo hn\xfata \xfar ",(0,a.kt)("inlineCode",{parentName:"p"},"48mem_192mem")," skiptingunni, sem notar 48 \xf6rgj\xf6rva \xe1 hvern hn\xfat fyrir samtals 96 \xf6rgj\xf6rva. Minni\xf0 \xe1 hvern kjarna er stillt \xe1 3900MB vinnsluminni. Sj\xe1 ",(0,a.kt)("a",{parentName:"p",href:"/docs/hardware/parthardw"},"Skilr\xfam og b\xfana\xf0ur")," fyrir uppl\xfdsingar um tilt\xe6kar skiptingarnar."),(0,a.kt)("p",null,"\xdeegar ",(0,a.kt)("inlineCode",{parentName:"p"},"SLURM")," \xe1\xe6tlarinn hefur \xfathluta\xf0 tilf\xf6ngum eru n\xe6stu l\xednur keyr\xf0ar \xed r\xf6\xf0. Fyrst er forritunar umhverfi\xf0 hla\xf0i\xf0 inn (sj\xe1 ",(0,a.kt)("a",{parentName:"p",href:"/docs/compiling/easybuild"},"Forritunar Umhverfi"),"), og ",(0,a.kt)("inlineCode",{parentName:"p"},"mpirun")," tilvik af Python skriftu er keyrt."),(0,a.kt)("p",null,"Of\xf0r\xe1\xf0un (e. Hyper-threading) er sj\xe1lfgefi\xf0 \xe1 Intel \xf6rgj\xf6rvum, og er m\xe6lt me\xf0 \xfev\xed a\xf0 b\xe6la \xfea\xf0 ni\xf0ur \xed lotu (e\xf0\xe1 .bashrc) skriftunni \xfeinni (Nema hugb\xfana\xf0urinn \xfeinn sty\xf0ji og s\xe9 r\xe9tt settur saman me\xf0 openmp)"),(0,a.kt)("p",null,"Fyrir .basrhc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"export OMP_NUM_THREADS=1\nexport MKL_NUM_THREADS=1\n")),(0,a.kt)("p",null,"Eftir a\xf0 skila inn lotustarfi getur \xfe\xfa s\xe9\xf0 st\xf6\xf0u og starfsau\xf0kenni \xe1 \xfeennan h\xe1tt:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ squeue -u $USER\nJOBID PARTITION     NAME    USER    ST  TIME  NODES NODELIST(REASON)\n11729 48cpu_192 Interact   <uname>  R   2:10      1 compute-17\n")),(0,a.kt)("p",null,"\xde\xfa getur h\xe6tt vi\xf0 lotustarf me\xf0 starfsau\xf0kennis n\xfamerinu eins og \xed \xfeessu d\xe6mi:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[..]$ scancel 11729\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"EF")," lotustarfi\xf0 \xfeitt \xfearf miki\xf0 af inntaks g\xf6gnum, e\xf0a ef \xfea\xf0 framkallar miki\xf0 \xfattak, er m\xe6lt me\xf0 \xfev\xed a\xf0 nota ",(0,a.kt)("strong",{parentName:"p"},"/scratch/")," disk sem er \xed bo\xf0i \xe1 \xf6llum reiknihn\xfatum. Sj\xe1 n\xe6sta ",(0,a.kt)("a",{parentName:"p",href:"scratch_disk"},"li\xf0"),"."))}c.isMDXComponent=!0}}]);